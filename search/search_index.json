{"config":{"lang":["en"],"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"RNA localization in smFISH images \u00b6 This is a collection of analysis tools to study RNA localization from smFISH images. We provide different analysis workflows (you can select them also from the banners). For each we specify the requirements and the required installations. We use a number of different open-source software packages, and detail their usage in this documentation. Calculate RNA distance distributions to membranes ImJoy \u00b6 ImJoy is image processing platform with an easy to use interface powered by a Python engine running in the background. ImJoy plays a central role in most analysis workflows. Working with ImJoy \u00b6 We provide links to install the different ImJoy plugins in dedicated ImJoy workspaces. Once installed, ImJoy remembers the workspaces and plugins and you simply have to open the web app and select the appropriate workspace https://imjoy.io/#/app If you press on the installation link, the ImJoy web app will open and display a dialog asking if you want to install the specified plugin. To confirm, press the install button. Most plugins require the ImJoy Plugin Engine , to perform computations in Python. You will need to install it only once, but launch it each time you work with ImJoy. For more information for how to install and use the pluging engine, please consult the ImJoy documentation . FISH-quant: RNA detection \u00b6 FISH-quant is a Matlab toolbox to localize RNAs in 3D from smFISH images. FISH-quant is often used to perform the RNA detection. Eventually, we would like to implement the main FISH-quant features in ImJoy.","title":"Overview"},{"location":"#rna-localization-in-smfish-images","text":"This is a collection of analysis tools to study RNA localization from smFISH images. We provide different analysis workflows (you can select them also from the banners). For each we specify the requirements and the required installations. We use a number of different open-source software packages, and detail their usage in this documentation. Calculate RNA distance distributions to membranes","title":"RNA localization in smFISH images"},{"location":"#imjoy","text":"ImJoy is image processing platform with an easy to use interface powered by a Python engine running in the background. ImJoy plays a central role in most analysis workflows.","title":"ImJoy"},{"location":"#working-with-imjoy","text":"We provide links to install the different ImJoy plugins in dedicated ImJoy workspaces. Once installed, ImJoy remembers the workspaces and plugins and you simply have to open the web app and select the appropriate workspace https://imjoy.io/#/app If you press on the installation link, the ImJoy web app will open and display a dialog asking if you want to install the specified plugin. To confirm, press the install button. Most plugins require the ImJoy Plugin Engine , to perform computations in Python. You will need to install it only once, but launch it each time you work with ImJoy. For more information for how to install and use the pluging engine, please consult the ImJoy documentation .","title":"Working with ImJoy"},{"location":"#fish-quant-rna-detection","text":"FISH-quant is a Matlab toolbox to localize RNAs in 3D from smFISH images. FISH-quant is often used to perform the RNA detection. Eventually, we would like to implement the main FISH-quant features in ImJoy.","title":"FISH-quant: RNA detection"},{"location":"about/licence/","text":"License \u00b6 MIT License Copyright \u00a9 Florian MUELLER Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions: The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software. THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.","title":"Licence"},{"location":"about/licence/#license","text":"MIT License Copyright \u00a9 Florian MUELLER Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions: The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software. THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.","title":"License"},{"location":"about/release-notes/","text":"Release Notes \u00b6 Upgrading \u00b6 Maintenance team \u00b6 The current and past team members. @muellerflorian Version 0.0.1 (2018-10-18) \u00b6 Initial release","title":"Release Notes"},{"location":"about/release-notes/#release-notes","text":"","title":"Release Notes"},{"location":"about/release-notes/#upgrading","text":"","title":"Upgrading"},{"location":"about/release-notes/#maintenance-team","text":"The current and past team members. @muellerflorian","title":"Maintenance team"},{"location":"about/release-notes/#version-001-2018-10-18","text":"Initial release","title":"Version 0.0.1 (2018-10-18)"},{"location":"membraneDistance/memb-analysis/","text":"Quantify RNA membrane enrichment with ImJoy \u00b6 Data organization \u00b6 We enforce a strict data organization for this analysis. More information about can be found in the dedicated section below. One folder per multi-channel image (\"parental folder\"). Each channel is saved as a separate .tif file containing all z-slices. Information for how to convert stacks can be found here are here . RNA molecules are detected with FISH-quant . Analysis results are also stored directly in the parental folder. RNA detection is described in more detail here . Membrane annotations are stored in a dedicated subfolder zstack_segmentation . More information below . As an example, we have one image img1 with 3 channels. The first channels contain analyzed smFISH data, the third one contains the cell membrane annotations for two Z slices (slice 3 and 8). . \u251c\u2500 img1/ \u2502 \u251c\u2500 C1-img1.tif # smFISH image (channel 1) \u2502 \u251c\u2500 C1-img1__spots.txt # FQ detection results (channel 1) \u2502 \u251c\u2500 C1-img1__settings_MATURE.txt # FQ detection settings (channel 1) \u2502 \u251c\u2500 C2-img1.tif # smFISH image of (channel 2) \u2502 \u251c\u2500 C2-img1__spots.txt # FQ detection results (channel 2) \u2502 \u251c\u2500 C2-img1__settings_MATURE.txt # FQ detection settings (channel 2) \u2502 \u251c\u2500 zstack_segmentation/ \u2502 \u2502 \u251c\u2500 C3-img1_Z3.tif # Image of z-slice 1 \u2502 \u2502 \u251c\u2500 C3-img1_Z3__RoiSet.zip # Membrane annotation of slice 1 \u2502 \u2502 \u251c\u2500 C3-img1_Z8.tif # Image of z-slice 2 \u2502 \u2502 \u251c\u2500 C3-img1_Z8__RoiSet.zip # Membrane annotation of slice 2 \u251c\u2500 img2/ . Multi-channel conversion \u00b6 The ImJoy plugin and FISH-quant requires that each channel is stored as a separate z-stack, if your images are stored as multi-channel z-stacks you can split these channels with FIJI. Create a new folder for each multi-channel image. Open image stack ( .dv ) in FIJI. Split channels (FQ only supports mono-channel input images) a. From menu: Image > Color > Split channels a. Save each channels with a unique channel identifier, e.g. C1- or DAPI_ . RNA detection \u00b6 Detection of RNAs is performed with FISH-quant and detailed here . Annotations of cell membrane \u00b6 In order to be able to compute the enrichment towards cell membrane or nuclear envelope, these membranes have to be annotated in EACH z-slice that should be considered in the analysis. This annotation can either be done manually, or ( TODO ) automatically with segmentation tools . Manual with FIJI \u00b6 Annotations have to be performed and stored as described below. For each multi-channel image, the annotations are stored in a dedicated subfolder called zstack_segmentation . Each annotated z-slice has to be saved as an individual image and the file name has to end with the corresponding z-slice i in the format _Zi . For instance, file name ends with img1_ch3_Z3.tif , where 3 is the actual slice number. You can obtain the individual slices with different methods: FIJI . Open the z-stack and go to menu Image > Stack > Stack to images . You can then save each image with the according file-name. TODO Automatically Annotations are stored with the name of the corresponding image, with the additional suffix __RoiSet.zip . For the example above, the added suffix would be img1_ch3_Z3__RoiSet.zip . To perform the actual annotation, follow these steps Open FIJI. Open the ROI manager : Analyze > Tools > ROI manager Open/Select the image that you would like to annotate. Select the annotation tool of choice, e.g. freehand or polygon. Outline first structure of interest. When done, press Add(t) in the ROI manager to add outline to the out line manager. Proceed with all other structures. Enabling Show all , will show all defined regions. Save regions by highlighting all regions in the list and pressing on More >> Save ... If only one region is saved, this will created a file with the extension .roi , if multiple regions will be save this will create a .zip file. As a file-name choose the name of the annotated image, followed by the suffix **__RoiSet.zip** . IMPORTANT : these annotations could be used for training of a neural network. If this is intended, then ALL structures, e.g. nuclei, have to be annotated. Unwanted elements, e.g. nuclei touching the cell border, can be removed in a post-processing step. Automated with DeepLearning \u00b6 TODO . Analysis with ImJoy \u00b6 The entire functinality of the plugin can be controlled within the plugin window. If you expand the plugin, you will see all parameters and operations that can be performed All options are explained in the Table below. If you change these parameters, the changed values will be saved in the browser and reused the next time you launch ImJoy. Option Type Default Description dZ int 2 Number of z-slices that will be used above and below the currently analyzed slice. Specify this value > 0 if not all z-slices are annotated/ Zmin int 0 Specify at which Z slice analysis should start. Value of 0 means that entire z-stack will be processed. Zmax int 0 As Z min but for maximum Z slice. Channel str 'C3-' Unique identifier for channel containing annotations. Hist [bin] int 20 Bin size for histogram to measure membrane enrichment (in nm). Hist [max] int 100 Maxium value for bins to calculate membrane enrichment. Image-size [X] int 960 Size of image in X. Image-size [Y] int 960 Size of image in Y. To analyze a FQ results file, you have to Specify the required parameters in the plugin interface. Execute plugin with clicking on the Plugin name Membrane Enrichment . This will display a file-dialog where you can select the FQ results file that you want to analyze (ends with __spots.txt ) that should be analyzed. This file will then be processed and the final distance enrichment histogram displayed in the interface. More plots and results file will be stored on the disk. Defining a root folder \u00b6 By default, ImJoy will open files in your home folder. If your data is at a different location, you can set a root folder. Each time you specify a file, ImJoy will open the file-dialog in this root folder. Press the button Root folder and specify the desired folder. The specified root folder is also saved, and will be resused the next time you launch ImJoy. Progress window \u00b6 Once you start the analysis, ImJoy will show you a progress window with progressbars for the different steps. Once done, it will display the final result in this image. Stored results \u00b6 The analysis script will create a new folder with the same name as the selected results file. In this folder it will create a subfolder MembDist_yymmdd-hhmm containing the analysis results. To allow to redo the analysis with different settings, the pluging will create for each performed analysis a separate folder name with the time-stamp when the analysis was performed (format yymmdd-hhmm ). This folder contains several files: _DistanceEnrichmentSummary.png : image containing the pooled analysis of all slices _HistogramPooled.csv : csv file containing the histograms of the RNA-membrane distance pooled from all z-slices. This can be opened with any Spreadsheet application (Excel, LibreOffice, Numbers, ...) and results from different images can then be pooled together. It contains the following data center : center of the bins histRNA_all : raw RNA distance histogram. histRNA_all_norm : normalized RNA histogram (values add to 1). histpix_all_norm : normalized distance histogram of all pixels in the cell. hist_RNA_all_normPix : normalized RNA histogram with the pixel histogram. Z-i.png : results of slice 'i' DataAll.json : json file containing all analysis results including settings. Can For the example above, we would obtain the following folder structure (shows only the relevant part for C1-img1 ) . \u251c\u2500 img1/ \u2502 \u251c\u2500 C1-img1.tif # smFISH image (channel 1) \u2502 \u251c\u2500 C1-img1__spots.txt # FQ detection results (channel 1) \u2502 \u251c\u2500 C1-img1__settings_MATURE.txt # FQ detection settings (channel 1) \u2502 \u251c\u2500 C1-img1__spots/ \u2502 \u2502 \u251c\u2500 MembDist_181017-1629/ \u2502 \u2502 \u2502 \u251c\u2500 _HistogramPooled.csv \u2502 \u2502 \u2502 \u251c\u2500 _DistanceEnrichmentSummary.png \u2502 \u2502 \u2502 \u251c\u2500 DataAll.json \u2502 \u2502 \u2502 \u251c\u2500 Z-1.png \u2502 \u2502 \u2502 \u251c\u2500 Z-2.png .","title":"Analysis"},{"location":"membraneDistance/memb-analysis/#quantify-rna-membrane-enrichment-with-imjoy","text":"","title":"Quantify RNA membrane enrichment with ImJoy"},{"location":"membraneDistance/memb-analysis/#data-organization","text":"We enforce a strict data organization for this analysis. More information about can be found in the dedicated section below. One folder per multi-channel image (\"parental folder\"). Each channel is saved as a separate .tif file containing all z-slices. Information for how to convert stacks can be found here are here . RNA molecules are detected with FISH-quant . Analysis results are also stored directly in the parental folder. RNA detection is described in more detail here . Membrane annotations are stored in a dedicated subfolder zstack_segmentation . More information below . As an example, we have one image img1 with 3 channels. The first channels contain analyzed smFISH data, the third one contains the cell membrane annotations for two Z slices (slice 3 and 8). . \u251c\u2500 img1/ \u2502 \u251c\u2500 C1-img1.tif # smFISH image (channel 1) \u2502 \u251c\u2500 C1-img1__spots.txt # FQ detection results (channel 1) \u2502 \u251c\u2500 C1-img1__settings_MATURE.txt # FQ detection settings (channel 1) \u2502 \u251c\u2500 C2-img1.tif # smFISH image of (channel 2) \u2502 \u251c\u2500 C2-img1__spots.txt # FQ detection results (channel 2) \u2502 \u251c\u2500 C2-img1__settings_MATURE.txt # FQ detection settings (channel 2) \u2502 \u251c\u2500 zstack_segmentation/ \u2502 \u2502 \u251c\u2500 C3-img1_Z3.tif # Image of z-slice 1 \u2502 \u2502 \u251c\u2500 C3-img1_Z3__RoiSet.zip # Membrane annotation of slice 1 \u2502 \u2502 \u251c\u2500 C3-img1_Z8.tif # Image of z-slice 2 \u2502 \u2502 \u251c\u2500 C3-img1_Z8__RoiSet.zip # Membrane annotation of slice 2 \u251c\u2500 img2/ .","title":"Data organization"},{"location":"membraneDistance/memb-analysis/#multi-channel-conversion","text":"The ImJoy plugin and FISH-quant requires that each channel is stored as a separate z-stack, if your images are stored as multi-channel z-stacks you can split these channels with FIJI. Create a new folder for each multi-channel image. Open image stack ( .dv ) in FIJI. Split channels (FQ only supports mono-channel input images) a. From menu: Image > Color > Split channels a. Save each channels with a unique channel identifier, e.g. C1- or DAPI_ .","title":"Multi-channel conversion"},{"location":"membraneDistance/memb-analysis/#rna-detection","text":"Detection of RNAs is performed with FISH-quant and detailed here .","title":"RNA detection"},{"location":"membraneDistance/memb-analysis/#annotations-of-cell-membrane","text":"In order to be able to compute the enrichment towards cell membrane or nuclear envelope, these membranes have to be annotated in EACH z-slice that should be considered in the analysis. This annotation can either be done manually, or ( TODO ) automatically with segmentation tools .","title":"Annotations of cell membrane"},{"location":"membraneDistance/memb-analysis/#manual-with-fiji","text":"Annotations have to be performed and stored as described below. For each multi-channel image, the annotations are stored in a dedicated subfolder called zstack_segmentation . Each annotated z-slice has to be saved as an individual image and the file name has to end with the corresponding z-slice i in the format _Zi . For instance, file name ends with img1_ch3_Z3.tif , where 3 is the actual slice number. You can obtain the individual slices with different methods: FIJI . Open the z-stack and go to menu Image > Stack > Stack to images . You can then save each image with the according file-name. TODO Automatically Annotations are stored with the name of the corresponding image, with the additional suffix __RoiSet.zip . For the example above, the added suffix would be img1_ch3_Z3__RoiSet.zip . To perform the actual annotation, follow these steps Open FIJI. Open the ROI manager : Analyze > Tools > ROI manager Open/Select the image that you would like to annotate. Select the annotation tool of choice, e.g. freehand or polygon. Outline first structure of interest. When done, press Add(t) in the ROI manager to add outline to the out line manager. Proceed with all other structures. Enabling Show all , will show all defined regions. Save regions by highlighting all regions in the list and pressing on More >> Save ... If only one region is saved, this will created a file with the extension .roi , if multiple regions will be save this will create a .zip file. As a file-name choose the name of the annotated image, followed by the suffix **__RoiSet.zip** . IMPORTANT : these annotations could be used for training of a neural network. If this is intended, then ALL structures, e.g. nuclei, have to be annotated. Unwanted elements, e.g. nuclei touching the cell border, can be removed in a post-processing step.","title":"Manual with FIJI"},{"location":"membraneDistance/memb-analysis/#automated-with-deeplearning","text":"TODO .","title":"Automated with DeepLearning"},{"location":"membraneDistance/memb-analysis/#analysis-with-imjoy","text":"The entire functinality of the plugin can be controlled within the plugin window. If you expand the plugin, you will see all parameters and operations that can be performed All options are explained in the Table below. If you change these parameters, the changed values will be saved in the browser and reused the next time you launch ImJoy. Option Type Default Description dZ int 2 Number of z-slices that will be used above and below the currently analyzed slice. Specify this value > 0 if not all z-slices are annotated/ Zmin int 0 Specify at which Z slice analysis should start. Value of 0 means that entire z-stack will be processed. Zmax int 0 As Z min but for maximum Z slice. Channel str 'C3-' Unique identifier for channel containing annotations. Hist [bin] int 20 Bin size for histogram to measure membrane enrichment (in nm). Hist [max] int 100 Maxium value for bins to calculate membrane enrichment. Image-size [X] int 960 Size of image in X. Image-size [Y] int 960 Size of image in Y. To analyze a FQ results file, you have to Specify the required parameters in the plugin interface. Execute plugin with clicking on the Plugin name Membrane Enrichment . This will display a file-dialog where you can select the FQ results file that you want to analyze (ends with __spots.txt ) that should be analyzed. This file will then be processed and the final distance enrichment histogram displayed in the interface. More plots and results file will be stored on the disk.","title":"Analysis with ImJoy"},{"location":"membraneDistance/memb-analysis/#defining-a-root-folder","text":"By default, ImJoy will open files in your home folder. If your data is at a different location, you can set a root folder. Each time you specify a file, ImJoy will open the file-dialog in this root folder. Press the button Root folder and specify the desired folder. The specified root folder is also saved, and will be resused the next time you launch ImJoy.","title":"Defining a root folder"},{"location":"membraneDistance/memb-analysis/#progress-window","text":"Once you start the analysis, ImJoy will show you a progress window with progressbars for the different steps. Once done, it will display the final result in this image.","title":"Progress window"},{"location":"membraneDistance/memb-analysis/#stored-results","text":"The analysis script will create a new folder with the same name as the selected results file. In this folder it will create a subfolder MembDist_yymmdd-hhmm containing the analysis results. To allow to redo the analysis with different settings, the pluging will create for each performed analysis a separate folder name with the time-stamp when the analysis was performed (format yymmdd-hhmm ). This folder contains several files: _DistanceEnrichmentSummary.png : image containing the pooled analysis of all slices _HistogramPooled.csv : csv file containing the histograms of the RNA-membrane distance pooled from all z-slices. This can be opened with any Spreadsheet application (Excel, LibreOffice, Numbers, ...) and results from different images can then be pooled together. It contains the following data center : center of the bins histRNA_all : raw RNA distance histogram. histRNA_all_norm : normalized RNA histogram (values add to 1). histpix_all_norm : normalized distance histogram of all pixels in the cell. hist_RNA_all_normPix : normalized RNA histogram with the pixel histogram. Z-i.png : results of slice 'i' DataAll.json : json file containing all analysis results including settings. Can For the example above, we would obtain the following folder structure (shows only the relevant part for C1-img1 ) . \u251c\u2500 img1/ \u2502 \u251c\u2500 C1-img1.tif # smFISH image (channel 1) \u2502 \u251c\u2500 C1-img1__spots.txt # FQ detection results (channel 1) \u2502 \u251c\u2500 C1-img1__settings_MATURE.txt # FQ detection settings (channel 1) \u2502 \u251c\u2500 C1-img1__spots/ \u2502 \u2502 \u251c\u2500 MembDist_181017-1629/ \u2502 \u2502 \u2502 \u251c\u2500 _HistogramPooled.csv \u2502 \u2502 \u2502 \u251c\u2500 _DistanceEnrichmentSummary.png \u2502 \u2502 \u2502 \u251c\u2500 DataAll.json \u2502 \u2502 \u2502 \u251c\u2500 Z-1.png \u2502 \u2502 \u2502 \u251c\u2500 Z-2.png .","title":"Stored results"},{"location":"membraneDistance/memb-overview/","text":"Measure RNA distance distribution to different membranes \u00b6 Goal is to quantify the distance distribution of RNAs to different membranes in the cell. This analysis requires FISH-quant to detect RNA positions. ImJoy with adequate adequate plugin. Installing the ImJoy plugin \u00b6 To install the analysis plugin for a specific analysis, select the corresponding links below. For some tasks, additional helper plugins might be installed automatically. Cell membrane enrichment This will open a dialog box where you can install the plugin by pressing the install button. For more information for how to install and use the pluging engine, please consult the ImJoy documentation . Test date \u00b6 You can download already processed test data for the Cell membrane enrichment plugin, from Dropbox . The zip archive contains data following the naming conventions of the examples below. Analysis overview \u00b6 For each RNA, we determine the closest distance of an RNA to a membrane. One thing to keep in mind more pixel close to the membrane than far away, e.g. in the center of the cell. A simple example is a circle. The maximum distance that you can be away from the \u201cmembrane\u201d is the radius of the circle. However, there is only one possibility to be that far away (in the center). However, there are many more \u201cclose\u201d positions. Plotting a histogram of the distance to the membrane for all possible positions in the circle, will yield a distribtion that strongly enriched for small distances. To normalized for this effect, we calculate all possible distance from the membrane for a given cell with a distance transformation . This tranformation results in an image, where the pixel values are not fluorescence intensities but distance values. An example is shown below. The blue lines are the cell outlines. The green dots are the detected RNAs. The image is the distance transform. The intensity values are distance to the membrane in pixels. We measure for all RNAs the distance to the membrane and calculate a histgram. We report the Raw RNA distance histogram. Normalized RNA histogram (values add to 1). Normalized distance histogram of all pixels in the cell. Normalized RNA histogram with the pixel histogram.","title":"Overview"},{"location":"membraneDistance/memb-overview/#measure-rna-distance-distribution-to-different-membranes","text":"Goal is to quantify the distance distribution of RNAs to different membranes in the cell. This analysis requires FISH-quant to detect RNA positions. ImJoy with adequate adequate plugin.","title":"Measure RNA distance distribution to different membranes"},{"location":"membraneDistance/memb-overview/#installing-the-imjoy-plugin","text":"To install the analysis plugin for a specific analysis, select the corresponding links below. For some tasks, additional helper plugins might be installed automatically. Cell membrane enrichment This will open a dialog box where you can install the plugin by pressing the install button. For more information for how to install and use the pluging engine, please consult the ImJoy documentation .","title":"Installing the ImJoy plugin"},{"location":"membraneDistance/memb-overview/#test-date","text":"You can download already processed test data for the Cell membrane enrichment plugin, from Dropbox . The zip archive contains data following the naming conventions of the examples below.","title":"Test date"},{"location":"membraneDistance/memb-overview/#analysis-overview","text":"For each RNA, we determine the closest distance of an RNA to a membrane. One thing to keep in mind more pixel close to the membrane than far away, e.g. in the center of the cell. A simple example is a circle. The maximum distance that you can be away from the \u201cmembrane\u201d is the radius of the circle. However, there is only one possibility to be that far away (in the center). However, there are many more \u201cclose\u201d positions. Plotting a histogram of the distance to the membrane for all possible positions in the circle, will yield a distribtion that strongly enriched for small distances. To normalized for this effect, we calculate all possible distance from the membrane for a given cell with a distance transformation . This tranformation results in an image, where the pixel values are not fluorescence intensities but distance values. An example is shown below. The blue lines are the cell outlines. The green dots are the detected RNAs. The image is the distance transform. The intensity values are distance to the membrane in pixels. We measure for all RNAs the distance to the membrane and calculate a histgram. We report the Raw RNA distance histogram. Normalized RNA histogram (values add to 1). Normalized distance histogram of all pixels in the cell. Normalized RNA histogram with the pixel histogram.","title":"Analysis overview"},{"location":"membraneDistance/memb-rna-detect/","text":"RNA detection in smFISH images \u00b6 Two options exist, you can either directly analyze the smFISH channels in FQ to detect individual RNAs, or you can use a Matlab script that detect individual RNA molecule but also decomposes RNA aggregates into individual RNAs with a Gaussian Mixture Model (GMM) . Detection of individual RNAs \u00b6 Below only a quick summary of the workflow is presented. For more details consult the FQ manual . Open FQ Set analysis folder to folder containing the image that should be analyzed: Menu Folder > Set root folder ) Open image that should be analyzed. Draw outline of embryo / cells: Open dedicated interface: Button Define outlines Draw a new cell: Button New cell Save outline: Button Quick-save Return to main FQ: Button Finished Filter image (default filter with LoG is usually good). Inspect image. On the right part of the interface select Filtered image , disable outline , and double click on the image. This will show a maximum intensity projection of the filtered image in a separate window. Here, you can change the contrast and zoom. In order to determine an appropriate threshold in the next step, determine a generous range of intensities range corresponding to the individual RNA molecules. Set pre-detection settings . FQ will test how many RNAs are detected with a range of user-defined intensity thresholds (based on the manual inspection of the image from above). 1. Open dedicated interface: Button Detect 0. In the user-dialog change the first two parameter: minimum and maximum threshold to test. We usually use a minimum value that\u2019s somewhat lower than the lowest RNAs to also consider intensity value corresponding to background. 0. FQ will calculate the number of detected RNAs for a range of values in this interval. Depending on the size of the image, this can take a little while. Once done, a plot with the number of detected RNAs as a function of the different thresholds is shown. If the specified range is not appropriate, it can be changed in this interface the computation be repeated. 0. Ideally, this curve shows a plateau for a value range corresponding to a good detection threshold. If that\u2019s not the case, a reasonable value corresponding to a visual assessment of what individual RNAs are should be chosen. A pre-detection with a given detection threshold can be perform and the results be inspected in a separate window. One other parameter that could be important to adjust is the **cropping region** around each RNA that is considered for analysis and fitting. Reducing this size allows sometimes to better detect closely spaced RNAs but at the cost of an imprecision in the fit. For most applications a value of +/- 2 voxels in XY and Z are a good compromise. Once you are satisfied with the settings press on Perform detection for all cells to return the main window. Press button Fit to fit each detected spot with a 3D Gaussian function. [Optional]. You can set threshold values for the different fitting parameters, e.g. remove spots with very small or very large standard deviations. You can now save the detection settings: [FQ] Main > Save > Save detection settings . As a file-name specify FQ__settings_MATURE.txt Depending on which analysis you want to perform, you either save the detection results or only the specified cell outline If you are satisfied with these detection results, you can save them directly: [FQ] Main > Save > Save ??? If you would like to also analyze RNA aggregates, you can save only the outline: [FQ] Main > Save > Save ??? Detection of clustered RNAs TODO \u00b6 After performing the steps above you will have two text files (1) the cell outline, (2) FQ detection settings. We provide a Matlab script WRAPPER_analyze_smFISH__EXP_v1.m which detects individual RNAs and then decomposes aggregates into individual RNAs (for more information see our Nat Communications paper ). This script allows batch-processing and multiple images can be analyzed together, where image is processed with its dedicated outline and settings. This can be done with the Matlab script. This script recursively searches a user-defined parental folder for folders containing FQ outline and settings files. These folders will then be processed and RNA detection performed, sub-folders will containing different analysis results will be created. results_GMM contains the RNA detection with the GMM (to decompose foci into individual RNAs). The most important files are the text files ending with _res_GMM.txt containing the RNA detection results, which will be used to perform the co-localization. The folder further contains a subfolder #plots with a PDF showing the results of the GMM detection. Individual RNAs are shown in green, decomposed foci with a red number indicating how many RNAs were estimated to be in each foci. results_noGMM contains the RNA detection results without the GMM. Note . The script also computes localization features that are not necessary for this analysis. To avoid this computation you can specify the line where the parameters for this analysis are set toS","title":"RNA detection"},{"location":"membraneDistance/memb-rna-detect/#rna-detection-in-smfish-images","text":"Two options exist, you can either directly analyze the smFISH channels in FQ to detect individual RNAs, or you can use a Matlab script that detect individual RNA molecule but also decomposes RNA aggregates into individual RNAs with a Gaussian Mixture Model (GMM) .","title":"RNA detection in smFISH images"},{"location":"membraneDistance/memb-rna-detect/#detection-of-individual-rnas","text":"Below only a quick summary of the workflow is presented. For more details consult the FQ manual . Open FQ Set analysis folder to folder containing the image that should be analyzed: Menu Folder > Set root folder ) Open image that should be analyzed. Draw outline of embryo / cells: Open dedicated interface: Button Define outlines Draw a new cell: Button New cell Save outline: Button Quick-save Return to main FQ: Button Finished Filter image (default filter with LoG is usually good). Inspect image. On the right part of the interface select Filtered image , disable outline , and double click on the image. This will show a maximum intensity projection of the filtered image in a separate window. Here, you can change the contrast and zoom. In order to determine an appropriate threshold in the next step, determine a generous range of intensities range corresponding to the individual RNA molecules. Set pre-detection settings . FQ will test how many RNAs are detected with a range of user-defined intensity thresholds (based on the manual inspection of the image from above). 1. Open dedicated interface: Button Detect 0. In the user-dialog change the first two parameter: minimum and maximum threshold to test. We usually use a minimum value that\u2019s somewhat lower than the lowest RNAs to also consider intensity value corresponding to background. 0. FQ will calculate the number of detected RNAs for a range of values in this interval. Depending on the size of the image, this can take a little while. Once done, a plot with the number of detected RNAs as a function of the different thresholds is shown. If the specified range is not appropriate, it can be changed in this interface the computation be repeated. 0. Ideally, this curve shows a plateau for a value range corresponding to a good detection threshold. If that\u2019s not the case, a reasonable value corresponding to a visual assessment of what individual RNAs are should be chosen. A pre-detection with a given detection threshold can be perform and the results be inspected in a separate window. One other parameter that could be important to adjust is the **cropping region** around each RNA that is considered for analysis and fitting. Reducing this size allows sometimes to better detect closely spaced RNAs but at the cost of an imprecision in the fit. For most applications a value of +/- 2 voxels in XY and Z are a good compromise. Once you are satisfied with the settings press on Perform detection for all cells to return the main window. Press button Fit to fit each detected spot with a 3D Gaussian function. [Optional]. You can set threshold values for the different fitting parameters, e.g. remove spots with very small or very large standard deviations. You can now save the detection settings: [FQ] Main > Save > Save detection settings . As a file-name specify FQ__settings_MATURE.txt Depending on which analysis you want to perform, you either save the detection results or only the specified cell outline If you are satisfied with these detection results, you can save them directly: [FQ] Main > Save > Save ??? If you would like to also analyze RNA aggregates, you can save only the outline: [FQ] Main > Save > Save ???","title":"Detection of individual RNAs"},{"location":"membraneDistance/memb-rna-detect/#detection-of-clustered-rnas-todo","text":"After performing the steps above you will have two text files (1) the cell outline, (2) FQ detection settings. We provide a Matlab script WRAPPER_analyze_smFISH__EXP_v1.m which detects individual RNAs and then decomposes aggregates into individual RNAs (for more information see our Nat Communications paper ). This script allows batch-processing and multiple images can be analyzed together, where image is processed with its dedicated outline and settings. This can be done with the Matlab script. This script recursively searches a user-defined parental folder for folders containing FQ outline and settings files. These folders will then be processed and RNA detection performed, sub-folders will containing different analysis results will be created. results_GMM contains the RNA detection with the GMM (to decompose foci into individual RNAs). The most important files are the text files ending with _res_GMM.txt containing the RNA detection results, which will be used to perform the co-localization. The folder further contains a subfolder #plots with a PDF showing the results of the GMM detection. Individual RNAs are shown in green, decomposed foci with a red number indicating how many RNAs were estimated to be in each foci. results_noGMM contains the RNA detection results without the GMM. Note . The script also computes localization features that are not necessary for this analysis. To avoid this computation you can specify the line where the parameters for this analysis are set toS","title":"Detection of clustered RNAs TODO"},{"location":"membraneDistance/memb-todo/","text":"TO DO: Cell membrane localizationTO DO \u00b6 Cell membrane enrichment Write ImJoy plugin to split channels. ImJoy plugin for nuclear envelope enrichment Automated segmentation with Deep Learning ImJoy plugin (op) to split z-stack in individual images Adjust GMM Matlab code to be compatible with ImJoy Plugin.","title":"To Do"},{"location":"membraneDistance/memb-todo/#to-do-cell-membrane-localizationto-do","text":"Cell membrane enrichment Write ImJoy plugin to split channels. ImJoy plugin for nuclear envelope enrichment Automated segmentation with Deep Learning ImJoy plugin (op) to split z-stack in individual images Adjust GMM Matlab code to be compatible with ImJoy Plugin.","title":"TO DO: Cell membrane localizationTO DO"}]}